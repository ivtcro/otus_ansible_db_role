language: python
python:
- '2.7'
install:
- pip install ansible==2.5.0 molecule testinfra apache-libcloud pycrypto
env:
  matrix:
  - GCE_CREDENTIALS_FILE="$(pwd)/Infra-be2fec3bae25.json"
  global:
  - secure: jNvW7THuTIYGNE/hmE1S9OcrChpBNqIT8YQUsVszQild/XCYSXASnktRhoNn5A4sb1bTkcqXxbBqyusXRSIe/xFajrCUsY0i+/gQQKd9u9H81XFk5Q4JeW64yiTrtntmrNgjKWl113jKs3ZAg1EKNcSsYo5ZAireg6pUZrfseyhPeQ61V3l5rf3+TifxpSfIyDSGHkz1CN4AqcX4SHWaT0zau9NN7DMWSLGFyvxK4JqN2eD/IKVuMwEBeq4g03h6VJX5b/gIfm9UMqWrzodwmSwkGWMEJmXDZVp1xOhUCFXYGHoYToQBLodPRFq5BxiWFNj5wqlfvdFR4pB9efaafXfEvi/9gZWgUAkpCWqsAJGJKYUfcDcSGWZG5BmjjYeMvDq4UogSjVx6kkExHggg8QpZp0vQmHzWWLYjsWm7bLVxmtot6dRSIdMsOHJPogsTzz/FLtsDdTrsXs+FP6uGmur7GBfCjsnlrfHNQ2s/7PQ6OEGEz+O95Kn1ZmogX5pZOIjImw+EIMZ6db2EyiBr0YNeRaYfRbXLPgUPjB2mglcDExyRidddLwpTTRTTlTbt6paF/ac4dSzO1Hn8TRGzH53c73DXnZlxzxUzIGkVLgUQ/I66y9XNcAzc4NOwjF82Q2tPS2u028JbaYm3KDhY9HVgGZ2pNPjrTUxxhLjOyv0=
  - secure: bPUJ9gNGsRl+BoVfUnP51Q8HjySPMy8eqxik0vD1zrwQ8HJBw4vvKX7t/CGzoHVRppWmuRGm4npst2j4ydjjYf+ffiy0les438h8BAPUhPWygEvoMwe39/oji7EaNkLjVkgPwqbycTeHZjJiS7DeyZfQFrc1tsE1M2itCTBs48KUWYxmweKVSEu7lJwr28+RGqx6HqQnKTQKYeKwLah6/wzfBjE7hY5aILx0fWTCxHd6mDI8cBSPV/RsBz/K+jamgs2qA1vgS50ipyUV6ltGgbun9TzQ78lAw9fkznomG05unI38DES4jfzxCM1p2J/OFGM4b2mfeVY4wvKgKlSejq//R+EnKEYGhZPMoRS9vooUcfKsjwfU1YWcF9hDsd6OxbhiHc3VKdNoCv5JMN7C8XQYD9kx1JG6rfc0PZySkB1CdrkjnpceEZT9OJZlSzds+/8gte5gk2oyzYmqZ1b87/ECeNkhV+UthBfmcLE/MWc6gZirx+pjIzNGXQaCPg+SQ0pNT6NCiIZUbsbryngOVeu6jc/dZn5meLZJpEjei03SF12BqiDcT3MY8yPmz6PH1/8kMad8vlDjcOuNXUFq7LoxgjxL7vpdVshPmcnpALb8i9dnLiZHVIoutb1tL4ELnkNqsMODtBaHeOSGMyq/EHeiDzZg7GOkBDxOBnF7cBA=
  - secure: sSzl9pERzPSSrkAx+43I4vc98phHTPAzoMN/McR39UxLIaQtQ+KxUGjcdwLLJ9DWEudnBVvZDL1oLbuPPnPzK3Rnpjk/LFvgG7AOkQgciWgmIJ2OvvkaxvJOGAKKDJ+s55XfsnnrsEDanHNmc1LH/u1aLUMGsZoXHx9O+JKFrUyvQKHqHC6VV+AMYsUEsaDMILVdQE4issB8cLjZQoWSm+NX1oNYspwSsD8pZAgqc+p65Z3PEtrTU34YKTz/dCGcIwlci+MDxIQDz4SP2ud7ITAKWK1aDiS/Eu3DdC3T6AS1H3C2chdxD4ufrZMdKq5gibL+BDees1EbxyfsHlOIEsSqTfbsekt1iBHIC4GLysfhVb1mjyieFNsWJMrXG09wva6xp+h3iVrpmfyJFAuPiQeRc/ulkuIudv6i2iZewOouCJnv1c5GredN1HTdb8cr3E7n9wlIMAFUrTlul2t4IioQcY7SzmNf4XU5+jo1KrpN+fhH6Iln4NvL4fan+6zr8j00mB9qr0+R5Yml6GNOHTobJ16Rm6SdouCFpYXT92WycwOhFLx7cWzk/bytNmUwkvXTzx5lCsmsnwpdaQkFzHgwq/UyhJQN8YRUmgoockn8wJwMgj972h0MTJI5hZxhWyU9eSJG+PSR8W/xfCH70w3Lul/K+w4wksXCH/HqqSc=
notifications:
  slack:
    secure: GtTmhAWqNPI8kPo1QxEauDfu6I59fhDsqX+hXptqUR7HZk2ylk8wNVL9NCHXQ6bpsZUXV+2jBL4ZtsoOtmPGysL/vi2o1dk7C3dYVGDYkW+Xe8ngXSqCMEPWXfJggbOC/EeBvcvAKVO1vb5rZpWwe880cyP/V162w9Y7pb5JDhHmQU3Y14XcvOMpGu97CdOme/OgjxYS7h50kLQ5CjFaEfYNNgCj916KFpwSLcw0EQvRAy5ZVtoyh/lCurZF6kVwAxF84q8IWG0e8YhZDZyE+BkrVAGhGS07I2Za5WfecwVFOzS6dkR0Upu0lbkAtuRfhtEAJBp5sj83u3nelcVO1i6MdQeduCs34eLOG1da7hoCO3dprdFdVoDBrFph4mUDz1H7vuE/2jFUQjz7p7Qjf6B0aIQc2aviQ1Dd+POBaX2HvV/Q74zJt1kX2tI1hd0fMgiusJiUA4Ipw6AWIjHbV8L67FK/3wU8OeNHRl3BHqlGHtzF3WeDnlJz6AlblFxVVp1QnNe25I5by2vcpAjcdiS00I6dw8kWcNMEu3eNEuhgAOgzTGIJg0HIwfETGG/0qK9CwYFslq0q8fiO076oF54p8utM4jFgLb4Hxjs51FC7MSu4oK74dMlIxTzdyCR03ZS0gSoynf5Ehg3jI8Q4V6ZhpL3g7PapJuxiwcwjD14=
before_install:
- openssl aes-256-cbc -K $encrypted_147aa2f05e43_key -iv $encrypted_147aa2f05e43_iv
  -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
script:
- molecule create --scenario-name ci-tests
- molecule converge --scenario-name ci-tests
- molecule verify --scenario-name ci-tests
after_script:
- molecule destroy --scenario-name ci-tests
